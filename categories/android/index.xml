<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Android on KALAQIAE</title><link>https://kalaqiae.com/categories/android/</link><description>Recent content in Android on KALAQIAE</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Tue, 24 Dec 2024 16:42:02 +0800</lastBuildDate><atom:link href="https://kalaqiae.com/categories/android/index.xml" rel="self" type="application/rss+xml"/><item><title>Android Note</title><link>https://kalaqiae.com/post/android/android-note/</link><pubDate>Tue, 24 Dec 2024 16:42:02 +0800</pubDate><guid>https://kalaqiae.com/post/android/android-note/</guid><description>&lt;h2 id="android-四大组件">Android 四大组件&lt;/h2>
&lt;ul>
&lt;li>&lt;strong>Activity&lt;/strong>
&lt;ul>
&lt;li>生命周期&lt;/li>
&lt;li>启动模式（standard，singleTop，singleTask，singleInstance）&lt;/li>
&lt;li>任务栈&lt;/li>
&lt;li>启动方式：显式 Intent，隐式 Intent（Intent Filter，URL Scheme，跨应用场景用隐式），ARouter&lt;/li>
&lt;li>PendingIntent&lt;/li>
&lt;li>数据传递&lt;/li>
&lt;li>startActivityForResult
启动一个 Activity 并等待结果。注意：&lt;code>startActivityForResult()&lt;/code> 在 Android 11 及以上版本已被弃用，推荐使用 &lt;code>ActivityResultContracts&lt;/code> 替代&lt;/li>
&lt;li>Fragment
&lt;ul>
&lt;li>生命周期（onAttach，onCreate，onCreateView，onActivityCreated，onStart，onResume，onPause，onStop，onDestroyView，onDestroy，onDetach）&lt;/li>
&lt;li>通信&lt;/li>
&lt;li>DialogFragment()&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>onConfigurationChanged&lt;/li>
&lt;li>onSaveInstanceState&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item><item><title>Android Localization</title><link>https://kalaqiae.com/post/android/android-localization/</link><pubDate>Thu, 25 Aug 2022 10:22:00 +0800</pubDate><guid>https://kalaqiae.com/post/android/android-localization/</guid><description>&lt;h3 id="切换语言">切换语言&lt;/h3>
&lt;p>获取 string.xml 里的字段时，可以用下面的 getAttachBaseContext 获取对应语言的 context&lt;br>
集成 tinker 热更适配要拿到对的上下文&lt;/p></description></item><item><title>Android 原生分享</title><link>https://kalaqiae.com/post/android/android-share/</link><pubDate>Sat, 12 Mar 2022 16:47:58 +0800</pubDate><guid>https://kalaqiae.com/post/android/android-share/</guid><description>&lt;h3 id="核心代码">核心代码&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="n">Intent&lt;/span> &lt;span class="n">sharingIntent&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="k">new&lt;/span> &lt;span class="n">Intent&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">Intent&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">ACTION_SEND&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// &amp;#34;text/plain&amp;#34; 和 &amp;#34;text/html&amp;#34; 区别：html 类型 可以识别加粗等标签
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 当需要分享图文时可以使用 &amp;#34;image/*&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="n">sharingIntent&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">setType&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;text/html&amp;#34;&lt;/span>&lt;span class="o">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">sharingIntent&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">putExtra&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">android&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">content&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">Intent&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">EXTRA_TEXT&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">Html&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">fromHtml&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="s">&amp;#34;&amp;lt;b&amp;gt;This is the text shared.&amp;lt;/b&amp;gt;&amp;#34;&lt;/span>&lt;span class="o">));&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">startActivity&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">Intent&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">createChooser&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="n">sharingIntent&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="s">&amp;#34;Share using&amp;#34;&lt;/span>&lt;span class="o">));&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Android Glide Note</title><link>https://kalaqiae.com/post/android/android-glide-tutorial/</link><pubDate>Sat, 12 Mar 2022 16:45:18 +0800</pubDate><guid>https://kalaqiae.com/post/android/android-glide-tutorial/</guid><description>&lt;h3 id="glide-图片加载回调监听">Glide 图片加载回调监听&lt;/h3>
&lt;ul>
&lt;li>可以使用 ImageViewTarget ， RequestListener 监听, RequestListener 可以监听网络图片是否加载成功。&lt;/li>
&lt;li>可以使用 listener 或 addListener 添加 RequestListener 监听。当调用多个 listener 方法时，只会调用最后的 listener 回调， addListener 方法会依次调用多个 addListener 设置的回调。&lt;/li>
&lt;/ul></description></item><item><title>Android Textview</title><link>https://kalaqiae.com/post/android/android-textview/</link><pubDate>Sat, 12 Mar 2022 16:27:58 +0800</pubDate><guid>https://kalaqiae.com/post/android/android-textview/</guid><description>&lt;h3 id="textview-ellipsize">TextView ellipsize&lt;/h3>
&lt;p>配合 maxLines 使用，超出部分省略号表示，跑马灯等效果&lt;/p>
&lt;p>marquee 使用跑马灯效果时记得设置 tvMarquee.setSelected(true); 需要注意不要抢了其他控件的焦点&lt;/p>
&lt;p>marqueeRepeatLimit 限制滚动次数可以设置 marquee_forever 或 1&lt;/p></description></item><item><title>activity 跳转</title><link>https://kalaqiae.com/post/android/android-activity-start/</link><pubDate>Sat, 10 Jul 2021 22:38:45 +0800</pubDate><guid>https://kalaqiae.com/post/android/android-activity-start/</guid><description>&lt;h3 id="用第三方跳转">用第三方跳转&lt;/h3>
&lt;p>&lt;a href="https://github.com/alibaba/ARouter">ARouter&lt;/a>&lt;/p>
&lt;h3 id="显式启动">显式启动&lt;/h3>
&lt;h4 id="方法一">方法一&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-java" data-lang="java">&lt;span class="line">&lt;span class="cl">&lt;span class="n">startActivity&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="k">new&lt;/span> &lt;span class="n">Intent&lt;/span>&lt;span class="o">(&lt;/span>&lt;span class="k">this&lt;/span>&lt;span class="o">,&lt;/span> &lt;span class="n">TestActivity&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="na">class&lt;/span>&lt;span class="o">));&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Android Video 基础笔记</title><link>https://kalaqiae.com/post/android/android-video-base/</link><pubDate>Mon, 17 May 2021 22:57:27 +0800</pubDate><guid>https://kalaqiae.com/post/android/android-video-base/</guid><description>&lt;h3 id="视频">视频&lt;/h3>
&lt;ul>
&lt;li>视频文件&lt;/li>
&lt;/ul>
&lt;p>视频文件 .mp4 .avi 就像一个容器，类似 ArrayList 存放数据，一个视频文件可以存放多个视频，音频&lt;/p></description></item><item><title>Glide 源码 4.12.0</title><link>https://kalaqiae.com/post/android/android-glide/</link><pubDate>Mon, 17 May 2021 21:41:16 +0800</pubDate><guid>https://kalaqiae.com/post/android/android-glide/</guid><description>&lt;p>Glide.with(this).load(url).apply(xxx).into(imageView);&lt;/p></description></item><item><title>Android 事件分发</title><link>https://kalaqiae.com/post/android/android-touch/</link><pubDate>Thu, 06 May 2021 21:36:48 +0800</pubDate><guid>https://kalaqiae.com/post/android/android-touch/</guid><description>&lt;h3 id="概要">概要&lt;/h3>
&lt;p>先上图，注意看左下角方法所属&lt;/p>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/kalaqiae/picBank/img/touch.png" alt="touch">&lt;/p>
&lt;p>当一个点击事件（MotionEvent ）产生后，系统需把这个事件传递给一个具体的 View 去处理&lt;/p>
&lt;p>一次完整的 MotionEvent 事件：ACTION_DOWN(1次) -&amp;gt; ACTION_MOVE(N次) -&amp;gt; ACTION_UP(1次)&lt;/p></description></item><item><title>APK 瘦身</title><link>https://kalaqiae.com/post/android/android-optimization/</link><pubDate>Thu, 06 May 2021 21:35:21 +0800</pubDate><guid>https://kalaqiae.com/post/android/android-optimization/</guid><description>&lt;h3 id="减少-res-资源大小">减少 res 资源大小&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>删除重复资源&lt;br>
右击项目 refactor/remove unused resources ,或 lint 工具来搜索项目中不再使用的图片等资源&lt;/p>
&lt;/li>
&lt;li>
&lt;p>重复资源优化&lt;br>
文件名不一样，但是内容一样的图片，可以通过比较 md5 值来判断是不是一样的资源，然后编辑 resources.arsc 来重定向&lt;/p>
&lt;/li>
&lt;/ul></description></item><item><title>Android Handler</title><link>https://kalaqiae.com/post/android/android-handler/</link><pubDate>Thu, 06 May 2021 21:34:42 +0800</pubDate><guid>https://kalaqiae.com/post/android/android-handler/</guid><description>&lt;h3 id="handler-概要">Handler 概要&lt;/h3>
&lt;p>&lt;a href="https://developer.android.google.cn/reference/android/os/Handler">官方文档&lt;/a>&lt;/p>
&lt;p>Handler 可以发送、处理 Message 和与线程关联的 Runnable 对象 MessageQueue ，每个 Handler 实例都与一个线程和该线程的消息队列关联。创建新的 Handler 时会绑定到 Looper。它将消息和线程传递到该 Looper 的消息队列，并在该 Looper 的线程上执行它们&lt;/p>
&lt;p>Handler 两个主要用途：在将来某个时刻执行消息和线程。在不同线程（切换线程）按顺序执行操作&lt;/p>
&lt;p>发送方法有 post(Runnable) , postDelayed(Runnable, long), sendMessage(Message) 等
默认通过 handleMessage(Message) 处理接收 Message&lt;/p>
&lt;h3 id="handlermessagemessagequeue以及looper">Handler、Message、MessageQueue以及Looper&lt;/h3>
&lt;ul>
&lt;li>Handler 负责发送和处理消息（Handler发送消息给 MessageQueue 和接收 Looper 返回的消息并且处理消息）&lt;/li>
&lt;li>Message 用来携带需要的数据&lt;/li>
&lt;li>MessageQueue 消息队列（实际用链表实现的），负责存放 Handler 发送过来 Message&lt;/li>
&lt;li>Looper 负责不停的从 MessageQueue 中取 Message 交给 Handler 处理&lt;/li>
&lt;/ul>
&lt;p>Handler 通过 sendMessage 发送 Message 到 MessageQueue 队列，Looper 通过 loop() 从 MessageQueue 取出 Message，再经过 msg.target.dispatchMessage 交给 Handler 的 handleMessage() 进行处理&lt;/p></description></item><item><title>Android abiFilter 相关</title><link>https://kalaqiae.com/post/android/android-abifilter-about/</link><pubDate>Thu, 22 Apr 2021 21:48:37 +0800</pubDate><guid>https://kalaqiae.com/post/android/android-abifilter-about/</guid><description>为了优化apk的大小，一般会只选择支持一种ABI，可以在AS中双击apk，在lib路径下查看so文件占用大小 Android ABI概念 Application Binary Interface 官方文档 cpu</description></item><item><title>Android adb 命令</title><link>https://kalaqiae.com/post/android/android-adb/</link><pubDate>Sun, 04 Apr 2021 21:06:02 +0800</pubDate><guid>https://kalaqiae.com/post/android/android-adb/</guid><description>&lt;p>AS 插件 ADB IDEA&lt;br>
pm 是 packagemanager 缩写, am 是 activitymanager 缩写&lt;br>
&lt;a href="https://developer.android.com/studio/command-line/adb?hl=zh-cn">Android 调试桥 (adb)&lt;/a>&lt;br>
&lt;a href="https://github.com/mzlogin/awesome-adb">awesome-adb&lt;/a>&lt;/p>
&lt;h3 id="查看-activity-task-栈的情况">查看 Activity Task 栈的情况&lt;/h3>
&lt;blockquote>
&lt;p>adb shell dumpsys activity&lt;/p>
&lt;/blockquote>
&lt;p>当前显示的 activity ，用 findstr 或 grep 过滤&lt;/p>
&lt;blockquote>
&lt;p>adb shell dumpsys activity | findstr &amp;ldquo;mFocusedActivity&amp;rdquo;&lt;br>
效果等同&lt;br>
adb shell &amp;ldquo;dumpsys activity | grep mFocusedActivity&amp;rdquo;&lt;br>
8.0以上用&lt;br>
adb shell dumpsys activity | findstr &amp;ldquo;mResumedActivity&amp;rdquo;&lt;/p>
&lt;/blockquote></description></item><item><title>Android strings.xml 使用</title><link>https://kalaqiae.com/post/android/android-xml-string/</link><pubDate>Thu, 01 Apr 2021 10:30:04 +0800</pubDate><guid>https://kalaqiae.com/post/android/android-xml-string/</guid><description>&lt;h3 id="设置字符串格式">设置字符串格式&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-xml" data-lang="xml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">&amp;lt;string&lt;/span> &lt;span class="na">name=&lt;/span>&lt;span class="s">&amp;#34;welcome_messages&amp;#34;&lt;/span>&lt;span class="nt">&amp;gt;&lt;/span>Hi, %1$s! You have %2$d new messages.&lt;span class="nt">&amp;lt;/string&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-kotlin" data-lang="kotlin">&lt;span class="line">&lt;span class="cl">&lt;span class="k">var&lt;/span> &lt;span class="py">text&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="n">getString&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nc">R&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">string&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">welcome_messages&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;kalaqiae&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="m">10&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>输出：Hi, kalaqiae! You have 10 new messages.&lt;/p>
&lt;p>%d （表示整数）&lt;br>
%f （表示浮点数）&lt;br>
%s （表示字符串）&lt;/p></description></item><item><title>Activity 的生命周期</title><link>https://kalaqiae.com/post/android/android-activity-lifecycle/</link><pubDate>Wed, 31 Mar 2021 22:34:15 +0800</pubDate><guid>https://kalaqiae.com/post/android/android-activity-lifecycle/</guid><description>&lt;h3 id="生命周期简介">生命周期简介&lt;/h3>
&lt;p>先上图&lt;/p>
&lt;p>&lt;img src="https://developer.android.google.cn/guide/components/images/activity_lifecycle.png" alt="Lifecycle">&lt;/p></description></item></channel></rss>