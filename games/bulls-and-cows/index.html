<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Bulls & Cows 猜数字游戏</title><link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css><style>:root{--primary:#6366f1;--primary-dark:#4f46e5;--success:#10b981;--danger:#ef4444;--warning:#f59e0b;--dark:#1e293b;--darker:#0f172a;--light:#f8fafc;--muted:#94a3b8;--glass:rgba(255, 255, 255, 0.05);--glass-2:rgba(255, 255, 255, 0.1)}*{margin:0;padding:0;box-sizing:border-box}body{font-family:inter,sans-serif;background:linear-gradient(135deg,#0f172a,#1e293b);color:var(--light);min-height:100vh;display:flex;justify-content:center;align-items:center;padding:20px;overflow:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.game-container{max-width:1000px;width:100%;display:flex;flex-direction:column;background:rgba(30,41,59,.8);backdrop-filter:blur(10px);border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,.3);overflow:hidden;border:1px solid rgba(255,255,255,.1)}.game-content{display:flex;flex-direction:row;padding:20px;gap:20px}.game-board-container{flex:1;display:flex;flex-direction:column}.game-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.game-title{display:flex;align-items:center;gap:12px}.game-title h1{font-size:1.8rem;font-weight:700;margin:0}.card{background:rgba(15,23,42,.5);border-radius:12px;padding:20px;margin-bottom:20px;border:1px solid rgba(255,255,255,5%)}.game-controls{display:flex;gap:15px;margin-bottom:20px;flex-wrap:wrap;align-items:center}.control-group{display:flex;align-items:center;gap:10px;background:rgba(255,255,255,5%);padding:10px 15px;border-radius:8px;border:1px solid rgba(255,255,255,.1)}.control-group label{font-size:.9rem;color:var(--muted);white-space:nowrap}select{background:rgba(15,23,42,.7);border:1px solid rgba(255,255,255,.1);border-radius:6px;padding:8px 12px;color:var(--light);font-size:.9rem;cursor:pointer;transition:all .2s ease}select:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 2px rgba(99,102,241,.2)}.checkbox-container{display:flex;align-items:center;gap:8px;cursor:pointer}.checkbox-container input[type=checkbox]{width:18px;height:18px;accent-color:var(--primary);cursor:pointer}.btn{padding:10px 16px;border:none;border-radius:8px;font-weight:600;font-size:.9rem;cursor:pointer;transition:all .3s;display:flex;align-items:center;gap:8px;box-shadow:0 4px 6px rgba(0,0,0,.1)}.btn:active{transform:translateY(2px);box-shadow:0 2px 4px rgba(0,0,0,.1)}.btn-primary{background:var(--primary);color:#fff}.btn-primary:hover{background:var(--primary-dark)}.btn-secondary{background:rgba(255,255,255,.1);color:#fff;border:1px solid rgba(255,255,255,.1)}.btn-secondary:hover{background:rgba(255,255,255,.15)}.btn-success{background:var(--success);color:#fff}.btn-success:hover{background:#0da271}.btn-warning{background:var(--warning);color:#fff}.btn-warning:hover{background:#e6950a}.input-area{display:flex;gap:10px;align-items:center;margin-bottom:15px}.guess-input{width:220px;padding:12px 15px;border-radius:8px;border:1px solid rgba(255,255,255,.1);background:rgba(255,255,255,5%);color:var(--light);font-size:18px;letter-spacing:6px;text-align:center;transition:all .2s ease;font-weight:600}.guess-input:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 2px rgba(99,102,241,.2)}.guess-input::selection{background:0 0}.keypad{display:flex;gap:10px;margin-bottom:20px;justify-content:center}.key{background:rgba(255,255,255,5%);padding:15px 20px;border-radius:8px;text-align:center;cursor:pointer;user-select:none;border:1px solid rgba(255,255,255,5%);font-weight:700;transition:all .2s ease;font-size:1.2rem;min-width:50px}.key:hover{background:rgba(255,255,255,.1);transform:translateY(-2px)}.key:active{transform:scale(.95)}.history{max-height:300px;overflow:auto;padding:10px;border-radius:8px;background:rgba(255,255,255,2%)}.hist-item{display:flex;justify-content:space-between;align-items:center;padding:12px;border-radius:6px;margin-bottom:8px;background:rgba(255,255,255,3%);font-size:14px;transition:all .2s ease}.hist-item:hover{background:rgba(255,255,255,5%)}.instructions{flex:0 0 300px;padding:20px;background:rgba(15,23,42,.5);border-radius:10px;font-size:.9rem;color:var(--muted);display:flex;flex-direction:column;justify-content:flex-start}.instructions h3{margin-bottom:15px;color:#cbd5e1;font-size:1.2rem;text-align:center}.instructions ul{list-style:none;padding-left:0}.instructions li{margin-bottom:12px;display:flex;align-items:center;gap:10px;padding:8px;border-radius:5px;transition:background .3s}.instructions li:hover{background:rgba(255,255,255,5%)}.instructions i{width:20px;text-align:center}.records{display:flex;flex-direction:column;gap:10px;margin-bottom:20px}.record-line{display:flex;justify-content:space-between;align-items:center;padding:12px;border-radius:8px;background:rgba(255,255,255,3%)}.small{font-size:.8rem;color:var(--muted)}.game-stats{display:flex;gap:15px;margin-bottom:20px}.stat-box{background:rgba(15,23,42,.7);padding:15px;border-radius:10px;text-align:center;flex:1;border:1px solid rgba(255,255,255,5%)}.stat-value{font-size:1.8rem;font-weight:700;color:var(--light)}.stat-label{font-size:.8rem;color:var(--muted);text-transform:uppercase;letter-spacing:1px}@media(max-width:920px){.game-content{flex-direction:column}.instructions{flex:none;width:100%}.guess-input{width:180px}}@media(max-width:640px){.game-container{border-radius:15px}.game-stats{flex-direction:column}.input-area{flex-direction:column;align-items:stretch}.guess-input{width:100%}.btn{flex:1;justify-content:center}.keypad{flex-wrap:wrap}.key{flex:1;min-width:40px;padding:12px 15px}.game-controls{flex-direction:column;align-items:stretch}.control-group{justify-content:space-between}}@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}100%{transform:scale(1)}}.pulse{animation:pulse 2s infinite}</style></head><body><div class=game-container><div class=game-content><div class=game-board-container><div class=game-header><div class=game-title><div><h1>猜数字</h1></div></div></div><div class=game-stats><div class=stat-box><div class=stat-label>已用时间</div><div id=timer class=stat-value>00:00</div></div></div><div class=card><div class=game-controls><div class=control-group><label for=digits>位数</label>
<select id=digits><option value=3>3 位</option><option value=4 selected>4 位</option><option value=5>5 位</option><option value=6>6 位</option></select></div><div class=control-group><div class=checkbox-container><input type=checkbox id=allowRepeat>
<label for=allowRepeat>允许重复数字</label></div></div><button class="btn btn-secondary" id=copyAnswer>
<i class="fas fa-copy"></i> 复制答案</button>
<button class="btn btn-primary" id=newGameBtn>
<i class="fas fa-play"></i> 新游戏</button></div><div class=input-area><input id=guessInput class=guess-input inputmode=numeric placeholder=输入你的猜测 maxlength=6>
<button class="btn btn-success" id=submitGuess>
<i class="fas fa-paper-plane"></i> 提交</button>
<button class="btn btn-warning" id=clearInput>
<i class="fas fa-eraser"></i> 清除</button></div><div class=keypad id=keypad></div><div class=history id=historyList aria-live=polite><div class=small>开始提交你的第一次猜测吧。</div></div></div></div><div class=instructions><h3><i class="fas fa-trophy"></i> 最佳记录</h3><div class=small style=text-align:center;margin-bottom:15px>(当前模式)</div><div class=records><div class=record-line><div><div class=small>最快时间</div><div id=bestTime style=font-weight:700>—</div></div><div class=small id=bestTimeMeta>—</div></div><div class=record-line><div><div class=small>最少猜次</div><div id=bestGuesses style=font-weight:700>—</div></div><div class=small id=bestGuessesMeta>—</div></div></div><div style=margin-top:20px><h3><i class="fas fa-info-circle"></i> 游戏说明</h3><ul><li><i class="fas fa-cog"></i> 系统会生成一个长度为 N（3-6位）的数字组合</li><li><i class="fas fa-redo"></i> 根据"允许重复"规则决定是否可以有重复数字</li><li><i class="fas fa-check-circle"></i> 提交一个与你所选长度相同的数字串</li><li><i class="fas fa-bullseye"></i> A = 数字与位置都正确</li><li><i class="fas fa-crosshairs"></i> B = 数字正确但位置错误</li><li><i class="fas fa-history"></i> 提交后会在左侧显示历史记录</li><li><i class="fas fa-chart-line"></i> 游戏会记录最快猜中时间和最少猜次</li></ul></div></div></div></div><script>(function(){const l=document.getElementById("digits"),d=document.getElementById("allowRepeat"),e=document.getElementById("guessInput"),V=document.getElementById("submitGuess"),M=document.getElementById("clearInput"),v=document.getElementById("historyList"),k=document.getElementById("timer"),H=document.getElementById("newGameBtn"),B=document.getElementById("copyAnswer"),u=document.getElementById("keypad"),h=document.getElementById("bestTime"),m=document.getElementById("bestGuesses"),f=document.getElementById("bestTimeMeta"),p=document.getElementById("bestGuessesMeta");let s="",t=parseInt(l.value,10),i=d.checked,o=[],n=null,A=null,a=0,c=!1;const j="bulls_cows_records_v1";function R(){N(),$(),r()}function N(){u.innerHTML="";for(let e=0;e<=9;e++){const t=document.createElement("div");t.className="key",t.textContent=String(e),t.dataset.d=e,u.appendChild(t)}u.addEventListener("click",e=>{const t=e.target.closest(".key");if(!t)return;t.dataset.d!==void 0&&C(t.dataset.d)})}function C(n){if(c)return;const o=t;let s=e.value||"";if(s.length>=o)return;if(!i&&s.includes(String(n)))return;e.value=s+String(n),e.focus()}function E(){e.value="",e.focus()}function D(){const n=t;let e="";if(i)for(let t=0;t<n;t++)e+=String(Math.floor(Math.random()*10));else{const t=[...Array(10).keys()].map(String);for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}e=t.slice(0,n).join("")}return e}function T(){n&&clearInterval(n),A=Date.now(),a=0,S(),n=setInterval(()=>{a=Math.floor((Date.now()-A)/1e3),S()},500)}function F(){n&&(clearInterval(n),n=null)}function S(){const e=a,t=String(Math.floor(e/60)).padStart(2,"0"),n=String(e%60).padStart(2,"0");k.textContent=t+":"+n}function L(e,t){let o=0,i=0;const s=e.split(""),n=t.split("");for(let e=0;e<n.length;e++)n[e]===s[e]&&(o++,s[e]=null,n[e]=null);for(let e=0;e<n.length;e++){if(n[e]===null)continue;const t=s.indexOf(n[e]);t>=0&&(i++,s[t]=null)}return{A:o,B:i}}function y(){if(c)return;const r=(e.value||"").trim();if(!/^\d+$/.test(r)){alert("请输入数字。");return}if(r.length!==t){alert("请输入 "+t+" 位数字。");return}if(!i){const e=new Set(r.split(""));if(e.size!==r.length){alert('模式设置为"不可重复"，请输入不重复的数字。');return}}o.length===0&&!n&&T();const{A:l,B:d}=L(s,r);o.push({guess:r,A:l,B:d,time:a}),x(),e.value="",l===t&&(F(),c=!0,P({len:t,allowRepeat:i,time:a,guesses:o.length,secret:s,date:(new Date).toISOString()}),setTimeout(()=>{alert(`恭喜你！猜对了
答案：`+s+`
用时：`+b(a)+"，猜测次数："+o.length),_()},50))}async function z(){try{await navigator.clipboard.writeText(s),g("已复制答案到剪贴板："+s)}catch{const e=document.createElement("textarea");e.value=s,document.body.appendChild(e),e.select(),document.execCommand("copy"),e.remove(),g("已复制答案到剪贴板（回退方法）："+s)}}function g(e){const t=document.createElement("div");t.textContent=e,Object.assign(t.style,{position:"fixed",right:"20px",bottom:"20px",background:"rgba(0,0,0,0.7)",color:"#fff",padding:"10px 12px",borderRadius:"8px",zIndex:9999}),document.body.appendChild(t),setTimeout(()=>t.style.opacity="0.0",1600),setTimeout(()=>t.remove(),2400)}function x(){if(v.innerHTML="",o.length===0){v.innerHTML='<div class="small">开始新游戏并提交你的第一次猜测吧。</div>';return}for(let e=0;e<o.length;e++){const t=o[e],n=document.createElement("div");n.className="hist-item",n.innerHTML=`<div><strong>第 ${e+1} 次</strong> &nbsp; ${t.guess}</div><div><span style="font-weight:700">${t.A}A</span> <span style="opacity:.7">${t.B}B</span></div>`,v.appendChild(n)}}function r(){t=parseInt(l.value,10),i=d.checked,o=[],k.textContent="00:00",a=0,c=!1,n&&(clearInterval(n),n=null),e.value="",s=D(),x(),_(),e.maxLength=t}function O(){try{const e=localStorage.getItem(j);return e?JSON.parse(e):{}}catch{return{}}}function I(e){localStorage.setItem(j,JSON.stringify(e))}function w(e,t){return`${e}-${t?1:0}`}function P({len:e,allowRepeat:t,time:n,guesses:s,secret:o,date:i}){const a=O(),r=w(e,t);a[r]||(a[r]={fastest:[],fewest:[]}),a[r].fastest.push({time:n,guesses:s,date:i,secret:o}),a[r].fastest.sort((e,t)=>e.time-t.time),a[r].fastest=a[r].fastest.slice(0,1),a[r].fewest.push({guesses:s,time:n,date:i,secret:o}),a[r].fewest.sort((e,t)=>e.guesses-t.guesses||e.time-t.time),a[r].fewest=a[r].fewest.slice(0,1),I(a)}function _(){const n=O(),s=w(t,i),e=n[s];if(!e){h.textContent="—",m.textContent="—",f.textContent="",p.textContent="";return}if(e.fastest&&e.fastest.length>0){const t=e.fastest[0];h.textContent=b(t.time),f.textContent=`${t.guesses} 次 • ${new Date(t.date).toLocaleDateString()}`}else h.textContent="—",f.textContent="";if(e.fewest&&e.fewest.length>0){const t=e.fewest[0];m.textContent=`${t.guesses} 次`,p.textContent=`${b(t.time)} • ${new Date(t.date).toLocaleDateString()}`}else m.textContent="—",p.textContent=""}function b(e){const t=String(Math.floor(e/60)).padStart(2,"0"),n=String(e%60).padStart(2,"0");return t+":"+n}function $(){l.addEventListener("change",()=>{t=parseInt(l.value,10),e.maxLength=t,r()}),d.addEventListener("change",()=>{i=d.checked,r()}),H.addEventListener("click",r),V.addEventListener("click",y),M.addEventListener("click",E),B.addEventListener("click",z),window.addEventListener("keydown",e=>{e.key>="0"&&e.key<="9"?(C(e.key),e.preventDefault()):e.key==="Backspace"?(E(),e.preventDefault()):e.key==="Enter"&&(y(),e.preventDefault())}),e.addEventListener("input",n=>{let s=e.value.replace(/[^\d]/g,"");if(!i){const e=new Set;s=s.split("").filter(t=>!e.has(t)&&(e.add(t),!0)).join("")}s.length>t&&(s=s.slice(0,t)),e.value=s}),e.addEventListener("focus",()=>{e.selectionStart=e.selectionEnd=e.value.length})}R(),window.bc={newGame:r,getSecret:()=>s,setSecret:e=>{s=String(e),g("已设置 secret（仅本地）")}}})()</script></body></html>