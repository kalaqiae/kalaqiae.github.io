<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Flappy Bird - 优化版</title><script src=https://cdn.tailwindcss.com></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css><style>:root{--primary:#6366f1;--primary-dark:#4f46e5;--success:#10b981;--danger:#ef4444;--warning:#f59e0b;--dark:#1e293b;--darker:#0f172a;--light:#f8fafc;--sky:#70c5ce;--ground:#ded895;--pipe:#73bf2e}*{margin:0;padding:0;box-sizing:border-box}body{font-family:inter,sans-serif;background:linear-gradient(135deg,#0f172a,#1e293b);color:var(--light);min-height:100vh;display:flex;justify-content:center;align-items:center;padding:20px;overflow:auto}.game-container{max-width:900px;width:100%;display:flex;flex-direction:column;background:rgba(30,41,59,.8);backdrop-filter:blur(10px);border-radius:20px;box-shadow:0 10px 30px rgba(0,0,0,.3);overflow:hidden;border:1px solid rgba(255,255,255,.1)}.game-content{display:flex;flex-direction:row;padding:20px;gap:20px}.game-board-container{flex:1;display:flex;flex-direction:column;align-items:center}.game-stats{display:flex;justify-content:space-between;padding:15px 20px;background:rgba(15,23,42,.7);border-radius:10px;margin-bottom:20px;width:100%}.stat-box{text-align:center;flex:1}.stat-value{font-size:1.8rem;font-weight:700;color:var(--light)}.stat-label{font-size:.8rem;color:#94a3b8;text-transform:uppercase;letter-spacing:1px}#gameCanvas{background:var(--sky);border-radius:10px;box-shadow:inset 0 0 20px rgba(0,0,0,.2);border:2px solid rgba(255,255,255,.1);display:block;margin:0 auto}.mobile-controls{display:none;margin-top:20px;flex-direction:column;align-items:center;gap:10px;width:100%}.control-btn{width:70px;height:70px;border-radius:50%;background:rgba(99,102,241,.2);border:2px solid rgba(99,102,241,.5);display:flex;align-items:center;justify-content:center;font-size:1.5rem;color:#fff;cursor:pointer;transition:all .2s ease;backdrop-filter:blur(5px)}.control-btn:active{background:rgba(99,102,241,.5);transform:scale(.95)}.game-message{text-align:center;padding:15px;margin-top:15px;border-radius:10px;font-weight:600;min-height:54px;display:flex;align-items:center;justify-content:center;transition:all .3s ease;width:100%}.message-info{background:rgba(59,130,246,.2);color:#60a5fa;border:1px solid rgba(59,130,246,.3)}.instructions{flex:0 0 300px;padding:20px;background:rgba(15,23,42,.5);border-radius:10px;font-size:.9rem;color:#94a3b8;display:flex;flex-direction:column;justify-content:center}.instructions h3{margin-bottom:15px;color:#cbd5e1;font-size:1.2rem;text-align:center}.instructions ul{list-style:none;padding-left:0}.instructions li{margin-bottom:12px;display:flex;align-items:center;gap:10px;padding:8px;border-radius:5px;transition:background .3s}.instructions li:hover{background:rgba(255,255,255,5%)}.instructions i{width:20px;text-align:center}@media(max-width:768px){.game-content{flex-direction:column}.instructions{flex:none;width:100%}}@media(max-width:640px){.game-container{border-radius:15px}.mobile-controls{display:flex}.control-btn{width:60px;height:60px}}@media(max-width:480px){.game-stats{flex-direction:column;gap:10px}.stat-box{display:flex;justify-content:space-between;align-items:center}.stat-value{font-size:1.5rem}}@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}100%{transform:scale(1)}}.pulse{animation:pulse 2s infinite}</style></head><body><div class=game-container><div class=game-content><div class=game-board-container><div class=game-stats><div class=stat-box><div class=stat-value id=score>0</div><div class=stat-label>当前得分</div></div><div class=stat-box><div class=stat-value id=bestScore>0</div><div class=stat-label>最佳记录</div></div></div><canvas id=gameCanvas width=320 height=480></canvas><div id=gameMessage class="game-message message-info">点击屏幕开始游戏</div><div class=mobile-controls><div class=control-btn id=jumpBtn><i class="fas fa-arrow-up"></i></div></div></div><div class=instructions><h3><i class="fas fa-info-circle"></i> 游戏说明</h3><ul><li><i class="fas fa-keyboard"></i> 键盘控制: 空格键或上箭头</li><li><i class="fas fa-mouse-pointer"></i> 鼠标控制: 点击屏幕跳跃</li><li><i class="fas fa-route"></i> 通过管道间隙获得分数</li><li><i class="fas fa-skull-crossbones"></i> 避免撞到管道或地面</li><li><i class="fas fa-trophy"></i> 挑战最高分记录</li></ul></div></div></div><script>const canvas=document.getElementById("gameCanvas"),ctx=canvas.getContext("2d"),scoreElement=document.getElementById("score"),bestScoreElement=document.getElementById("bestScore"),gameMessage=document.getElementById("gameMessage");let frames=0;const DEGREE=Math.PI/180,state={current:0,getReady:0,game:1,over:2,crashing:3},backgroundElements={clouds:[{x:50,y:80,size:25,speed:.5},{x:200,y:150,size:30,speed:.4},{x:100,y:220,size:28,speed:.3},{x:280,y:100,size:22,speed:.6},{x:150,y:300,size:26,speed:.45}],mountains:[{x:0,y:350,width:120,height:130,speed:.8},{x:100,y:370,width:100,height:110,speed:.7},{x:180,y:360,width:140,height:120,speed:.9}]},bird={x:50,y:150,w:34,h:26,radius:12,frame:0,speed:0,gravity:.25,crashGravity:.8,jump:4.6,rotation:0,crashRotation:0,isCrashing:!1,draw:function(){let e={x:this.x+this.w/2,y:this.y+this.h/2};ctx.save(),ctx.translate(e.x,e.y);let t=this.rotation*DEGREE;this.isCrashing&&(t=this.crashRotation*DEGREE),ctx.rotate(t),ctx.fillStyle="#f4e605",ctx.fillRect(-this.w/2,-this.h/2,this.w,this.h),ctx.fillStyle="#fff",ctx.beginPath(),ctx.arc(8,-8,8,0,2*Math.PI),ctx.fill(),ctx.fillStyle="#000",ctx.beginPath(),ctx.arc(10,-8,3,0,2*Math.PI),ctx.fill(),ctx.fillStyle="#f77e0d",ctx.fillRect(6,4,14,8),ctx.restore()},update:function(){state.current==state.getReady?(this.y=150+Math.sin(frames*.1)*5,this.rotation=0*DEGREE,this.isCrashing=!1):state.current==state.game?(this.speed+=this.gravity,this.y+=this.speed,this.y+this.h/2>=canvas.height-fg.h&&(this.y=canvas.height-fg.h-this.h/2,state.current==state.game&&(state.current=state.over,gameOver())),this.speed>0?this.rotation=Math.min(90,this.rotation+2):this.rotation=Math.max(-25,this.rotation-4)):state.current==state.crashing&&(this.isCrashing||(this.isCrashing=!0,this.speed=0),this.speed+=this.crashGravity,this.y+=this.speed,this.crashRotation=Math.min(180,this.crashRotation+8),this.y+this.h/2>=canvas.height-fg.h&&(this.y=canvas.height-fg.h-this.h/2,state.current=state.over,gameOver()))},flap:function(){this.speed=-this.jump},startCrash:function(){state.current=state.crashing},reset:function(){this.speed=0,this.rotation=0,this.crashRotation=0,this.y=150,this.isCrashing=!1}},fg={h:80,x:0,dx:2,grassOffset:0,draw:function(){ctx.fillStyle="#d4c483",ctx.fillRect(0,canvas.height-this.h,canvas.width,this.h);const e=80,n=40,t=e+n;for(let s=-t;s<canvas.width+t;s+=t){const o=ctx.createLinearGradient(s+this.grassOffset,0,s+this.grassOffset+e,0);o.addColorStop(0,"#8bc34a"),o.addColorStop(1,"#73bf2e"),ctx.fillStyle=o,ctx.fillRect(s+this.grassOffset,canvas.height-this.h,e,12);const i=ctx.createLinearGradient(s+this.grassOffset+e,0,s+this.grassOffset+t,0);i.addColorStop(0,"#5a9c23"),i.addColorStop(1,"#73bf2e"),ctx.fillStyle=i,ctx.fillRect(s+this.grassOffset+e,canvas.height-this.h,n,12)}ctx.fillStyle="rgba(0,0,0,0.1)",ctx.fillRect(0,canvas.height-this.h+12,canvas.width,2)},update:function(){state.current==state.game&&(this.x=(this.x-this.dx)%(canvas.width/2),this.grassOffset=(this.grassOffset-2)%120)}},bg={draw:function(){const e=ctx.createLinearGradient(0,0,0,canvas.height);e.addColorStop(0,"#87CEEB"),e.addColorStop(1,"#1E90FF"),ctx.fillStyle=e,ctx.fillRect(0,0,canvas.width,canvas.height),ctx.fillStyle="rgba(100, 120, 150, 0.6)",backgroundElements.mountains.forEach(e=>{ctx.beginPath(),ctx.moveTo(e.x,canvas.height-fg.h),ctx.lineTo(e.x+e.width/2,canvas.height-fg.h-e.height),ctx.lineTo(e.x+e.width,canvas.height-fg.h),ctx.closePath(),ctx.fill()}),ctx.fillStyle="rgba(255, 255, 255, 0.8)",backgroundElements.clouds.forEach(e=>{ctx.beginPath(),ctx.arc(e.x,e.y,e.size*.8,0,Math.PI*2),ctx.arc(e.x+e.size*.6,e.y,e.size,0,Math.PI*2),ctx.arc(e.x+e.size*1.2,e.y,e.size*.8,0,Math.PI*2),ctx.fill()})},update:function(){state.current==state.game&&(backgroundElements.clouds.forEach(e=>{e.x-=e.speed,e.x+e.size*1.5<0&&(e.x=canvas.width+e.size,e.y=50+Math.random()*200)}),backgroundElements.mountains.forEach(e=>{e.x-=e.speed,e.x+e.width<0&&(e.x=canvas.width,e.height=100+Math.random()*50)}))}},pipes={position:[],w:52,h:400,gap:100,dx:2,maxYPos:-150,draw:function(){for(let s=0;s<this.position.length;s++){let e=this.position[s],o=e.y,i=e.y+this.h+this.gap;const t=ctx.createLinearGradient(e.x,0,e.x+this.w,0);t.addColorStop(0,"#4a8a1f"),t.addColorStop(.3,"#5fa82e"),t.addColorStop(.7,"#73bf2e"),t.addColorStop(1,"#5a9c23"),ctx.fillStyle=t,ctx.fillRect(e.x,o,this.w,this.h);const n=ctx.createLinearGradient(e.x-3,0,e.x+this.w+3,0);n.addColorStop(0,"#3a6c13"),n.addColorStop(.5,"#4a8a1f"),n.addColorStop(1,"#3a6c13"),ctx.fillStyle=n,ctx.fillRect(e.x-3,o+this.h-25,this.w+6,25),ctx.strokeStyle="#2d5510",ctx.lineWidth=2,ctx.strokeRect(e.x-3,o+this.h-25,this.w+6,25),ctx.fillStyle=t,ctx.fillRect(e.x,i,this.w,this.h),ctx.fillStyle=n,ctx.fillRect(e.x-3,i,this.w+6,25),ctx.strokeStyle="#2d5510",ctx.lineWidth=2,ctx.strokeRect(e.x-3,i,this.w+6,25)}},update:function(){if(state.current!==state.game)return;frames%100==0&&this.position.push({x:canvas.width,y:this.maxYPos*(Math.random()+1)});for(let t=0;t<this.position.length;t++){let e=this.position[t];e.x-=this.dx,e.x+this.w<=0&&(this.position.shift(),score.value+=1,score.best=Math.max(score.value,score.best),localStorage.setItem("flappy_best",score.best),scoreElement.textContent=score.value,bestScoreElement.textContent=score.best,scoreElement.classList.add("pulse"),setTimeout(()=>{scoreElement.classList.remove("pulse")},300));let n=bird.x-bird.w/2+5,s=bird.x+bird.w/2-5,o=bird.y-bird.h/2+5,i=bird.y+bird.h/2-5,a=e.x,r=e.x+this.w,c=e.y+this.h,l=e.y+this.h+this.gap;s>a&&n<r&&(o<c||i>l)&&bird.startCrash()}},reset:function(){this.position=[]}},score={best:parseInt(localStorage.getItem("flappy_best"))||0,value:0,draw:function(){ctx.fillStyle="#FFF",ctx.strokeStyle="#000",(state.current==state.game||state.current==state.crashing)&&(ctx.lineWidth=2,ctx.font="35px 'Inter', sans-serif",ctx.fillText(this.value,canvas.width/2-10,50),ctx.strokeText(this.value,canvas.width/2-10,50))},reset:function(){this.value=0,scoreElement.textContent="0"}};function drawUI(){if(state.current==state.getReady&&(ctx.fillStyle="rgba(0,0,0,0.5)",ctx.fillRect(0,0,canvas.width,canvas.height),ctx.fillStyle="white",ctx.font="bold 30px 'Inter', sans-serif",ctx.fillText("准备开始",90,180),ctx.font="18px 'Inter', sans-serif",ctx.fillText("点击或按空格键开始",70,220),Math.floor(frames/30)%2===0&&ctx.fillText("↓",canvas.width/2-5,260)),state.current==state.over){ctx.fillStyle="rgba(0,0,0,0.7)",ctx.fillRect(0,0,canvas.width,canvas.height);const n=240,o=180,t=(canvas.width-n)/2,e=(canvas.height-o)/2;ctx.fillStyle="rgba(30, 41, 59, 0.95)",ctx.strokeStyle="rgba(99, 102, 241, 0.5)",ctx.lineWidth=2,ctx.beginPath(),ctx.roundRect(t,e,n,o,15),ctx.fill(),ctx.stroke(),ctx.fillStyle="#60a5fa",ctx.font="bold 24px 'Inter', sans-serif",ctx.textAlign="center",ctx.fillText("游戏结束",canvas.width/2,e+40),ctx.fillStyle="#cbd5e1",ctx.font="16px 'Inter', sans-serif",ctx.textAlign="left",ctx.fillText("当前得分:",t+40,e+80),ctx.fillText("最佳记录:",t+40,e+110),ctx.fillStyle="#60a5fa",ctx.font="bold 18px 'Inter', sans-serif",ctx.textAlign="right",ctx.fillText(score.value,t+n-40,e+80),ctx.fillText(score.best,t+n-40,e+110);const r=120,c=40,i=canvas.width/2-r/2,s=e+o-60,a=ctx.createLinearGradient(i,s,i,s+c);a.addColorStop(0,"#3b82f6"),a.addColorStop(1,"#1d4ed8"),ctx.fillStyle=a,ctx.beginPath(),ctx.roundRect(i,s,r,c,10),ctx.fill(),ctx.fillStyle="white",ctx.font="bold 16px 'Inter', sans-serif",ctx.textAlign="center",ctx.fillText("重新开始",canvas.width/2,s+25),ctx.textAlign="left"}}function draw(){bg.draw(),pipes.draw(),fg.draw(),bird.draw(),score.draw(),drawUI()}function update(){bg.update(),bird.update(),fg.update(),state.current===state.game&&pipes.update()}function loop(){update(),draw(),frames++,requestAnimationFrame(loop)}function startGame(){if(state.current===state.game)return;state.current=state.game,gameMessage.textContent="游戏进行中"}function resetGame(){pipes.reset(),bird.reset(),score.reset(),frames=0,state.current=state.getReady,gameMessage.textContent="点击屏幕开始游戏",draw()}function gameOver(){gameMessage.textContent="游戏结束！点击屏幕重新开始"}function handleGameControl(){switch(state.current){case state.getReady:startGame(),bird.flap();break;case state.game:bird.flap();break;case state.over:resetGame();break}}canvas.addEventListener("click",function(e){if(state.current===state.over){let t=canvas.getBoundingClientRect(),n=e.clientX-t.left,s=e.clientY-t.top;const c=240,o=180,u=(canvas.width-c)/2,l=(canvas.height-o)/2,i=120,d=40,a=canvas.width/2-i/2,r=l+o-60;n>=a&&n<=a+i&&s>=r&&s<=r+d&&resetGame()}else handleGameControl()});const jumpBtn=document.getElementById("jumpBtn");jumpBtn.addEventListener("click",function(){handleGameControl()}),window.addEventListener("keydown",function(e){(e.code==="Space"||e.key==="ArrowUp")&&handleGameControl()});function init(){score.best=parseInt(localStorage.getItem("flappy_best"))||0,bestScoreElement.textContent=score.best,loop()}init()</script></body></html>