<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>2048</title><style>:root{--bg:#faf8ef;--card:#faf8ef;--tile-size:84px;--gap:14px;--radius:6px}*{box-sizing:border-box}body{margin:0;font-family:segoe ui,sf pro display,-apple-system,BlinkMacSystemFont,Roboto,Helvetica,Arial,sans-serif;background:linear-gradient(135deg,#faf8ef 0%,#e9e6df 100%);display:flex;align-items:center;justify-content:center;height:100vh;color:#776e65}.card{padding:20px 20px 26px;background:var(--card);border-radius:6px;display:flex;flex-direction:column;align-items:center;max-width:500px;width:100%}.header{display:flex;justify-content:space-between;align-items:center;width:100%;margin-bottom:20px}.title{font-size:60px;font-weight:900;color:#776e65;margin:0}.controls{display:flex;gap:10px;align-items:center}.score-box{background:#bbada0;padding:8px 16px;border-radius:6px;text-align:center;color:#fff;min-width:80px}.score-label{font-size:13px;font-weight:700;text-transform:uppercase}.score-value{font-size:20px;font-weight:700}button{border:none;background:#8f7a66;color:#f9f6f2;padding:10px 16px;border-radius:6px;cursor:pointer;font-weight:600;font-size:16px;transition:background .2s}button:hover{background:#7c6b5a}.board-wrap{padding:var(--gap);background:#bbada0;border-radius:6px;box-shadow:0 4px 10px rgba(0,0,0,.1)}.board{position:relative;width:calc(var(--tile-size)*4 + var(--gap)*5);height:calc(var(--tile-size)*4 + var(--gap)*5);border-radius:6px}.cell{position:absolute;width:var(--tile-size);height:var(--tile-size);background:rgba(238,228,218,.35);border-radius:6px}.tiles{position:absolute;inset:0}.tile{position:absolute;width:var(--tile-size);height:var(--tile-size);display:flex;align-items:center;justify-content:center;border-radius:6px;font-weight:900;transition:transform 150ms,left 150ms,top 150ms;box-shadow:0 3px 6px rgba(0,0,0,.1)}.tile.new{animation:pop 300ms cubic-bezier(.2,.9,.3,1)}.tile.merge{animation:merge 320ms cubic-bezier(.2,.9,.3,1)}@keyframes pop{0%{transform:scale(.2);opacity:0}60%{transform:scale(1.05);opacity:1}100%{transform:scale(1)}}@keyframes merge{0%{transform:scale(1)}50%{transform:scale(1.15)}100%{transform:scale(1)}}.tile-2{background:#eee4da;color:#776e65;font-size:48px}.tile-4{background:#ede0c8;color:#776e65;font-size:48px}.tile-8{background:#f2b179;color:#f9f6f2;font-size:48px}.tile-16{background:#f59563;color:#f9f6f2;font-size:42px}.tile-32{background:#f67c5f;color:#f9f6f2;font-size:42px}.tile-64{background:#f65e3b;color:#f9f6f2;font-size:42px}.tile-128{background:#edcf72;color:#f9f6f2;font-size:36px;box-shadow:0 0 15px rgba(243,215,116,.4)}.tile-256{background:#edcc61;color:#f9f6f2;font-size:36px;box-shadow:0 0 15px rgba(243,215,116,.5)}.tile-512{background:#edc850;color:#f9f6f2;font-size:36px;box-shadow:0 0 15px rgba(243,215,116,.6)}.tile-1024{background:#edc53f;color:#f9f6f2;font-size:30px;box-shadow:0 0 15px rgba(243,215,116,.7)}.tile-2048{background:#edc22e;color:#f9f6f2;font-size:30px;box-shadow:0 0 15px rgba(243,215,116,.8)}.game-explanation{margin-top:30px;line-height:1.5;color:#776e65;text-align:center;max-width:500px}@media(max-width:520px){.header{flex-direction:column;gap:15px}.title{font-size:48px}.card{padding:15px}:root{--tile-size:70px;--gap:10px}.tile{font-size:36px}.tile-128,.tile-256,.tile-512{font-size:30px}.tile-1024,.tile-2048{font-size:24px}}</style></head><body><div class=card><div class=header><h1 class=title>2048</h1><div class=controls><div class=score-box><div class=score-label>åˆ†æ•°</div><div class=score-value id=score>0</div></div><div class=score-box><div class=score-label>æœ€é«˜</div><div class=score-value id=best>0</div></div><button id=newBtn>æ–°æ¸¸æˆ</button></div></div><div class=board-wrap><div class=board id=board><div class=tiles id=tiles></div></div></div><div class=game-explanation><p><strong>æ¸¸æˆè§„åˆ™ï¼š</strong>ä½¿ç”¨æ–¹å‘é”®ç§»åŠ¨æ–¹å—ã€‚å½“ä¸¤ä¸ªç›¸åŒæ•°å­—çš„æ–¹å—ç¢°æ’æ—¶ï¼Œå®ƒä»¬ä¼šåˆå¹¶æˆä¸€ä¸ªæ•°å­—ç¿»å€çš„æ–¹å—ã€‚åŠªåŠ›è·å¾—2048æ–¹å—ï¼</p></div></div><script>(function(){const e=4,c=document.getElementById("board"),u=document.getElementById("tiles"),E=document.getElementById("score"),g=document.getElementById("best"),C=document.getElementById("newBtn");let t=[],n=0,r=parseInt(localStorage.getItem("2048-best")||"0",10),d=!1;g.textContent=r;const s=14,a=84;function j(){t=Array.from({length:e},()=>Array(e).fill(0))}function w(){const n=[];for(let s=0;s<e;s++)for(let o=0;o<e;o++)t[s][o]===0&&n.push([s,o]);return n.length?n[Math.floor(Math.random()*n.length)]:null}function h(){const e=w();if(!e)return!1;const[n,s]=e;return t[n][s]=Math.random()<.9?2:4,p(n,s,!0),!0}function m(e){n=e,E.textContent=n,n>r&&(r=n,g.textContent=r,localStorage.setItem("2048-best",r))}function b(){if(c.querySelectorAll(".cell").length)return;for(let t=0;t<e;t++)for(let o=0;o<e;o++){const n=document.createElement("div");n.className="cell",n.style.left=s+o*(a+s)+"px",n.style.top=s+t*(a+s)+"px",c.appendChild(n)}}function _(){u.innerHTML=""}function y(e,t,n,o={isNew:!1}){const i=document.createElement("div");return i.className="tile tile-"+e+(o.isNew?" new":""),i.textContent=e,i.style.width=a+"px",i.style.height=a+"px",i.style.left=s+n*(a+s)+"px",i.style.top=s+t*(a+s)+"px",i}function p(e,n,s){const o=y(t[e][n],e,n,{isNew:s});u.appendChild(o)}function f(){u.innerHTML="";for(let n=0;n<e;n++)for(let s=0;s<e;s++)t[n][s]&&p(n,s,!1)}function i(n){for(let s=0;s<n;s++){const o=Array.from({length:e},()=>Array(e).fill(0));for(let n=0;n<e;n++)for(let s=0;s<e;s++)o[s][e-1-n]=t[n][s];t=o}}function l(t){const a=t.slice();let s=t.filter(e=>e!==0);const o=new Array(s.length).fill(!1);for(let e=0;e<s.length-1;e++)s[e]===s[e+1]&&!o[e]&&!o[e+1]&&(s[e]*=2,n+=s[e],o[e]=!0,s.splice(e+1,1));for(;s.length<e;)s.push(0);let i=!1;for(let t=0;t<e;t++)if(s[t]!==a[t]){i=!0;break}return{arr:s,changed:i}}function O(){for(let n=0;n<e;n++)for(let s=0;s<e;s++)if(t[n][s]===0)return!0;for(let n=0;n<e;n++)for(let s=0;s<e-1;s++)if(t[n][s]===t[n][s+1])return!0;for(let n=0;n<e;n++)for(let s=0;s<e-1;s++)if(t[s][n]===t[s+1][n])return!0;return!1}function x(){for(let n=0;n<e;n++)for(let s=0;s<e;s++)if(t[n][s]===2048)return!0;return!1}function o(s){let o=!1;if(s==="left")for(let n=0;n<e;n++){const{arr:s,changed:i}=l(t[n]);i&&(o=!0),t[n]=s}else if(s==="right"){i(2);for(let n=0;n<e;n++){const{arr:s,changed:i}=l(t[n]);i&&(o=!0),t[n]=s}i(2)}else if(s==="up"){i(3);for(let n=0;n<e;n++){const{arr:s,changed:i}=l(t[n]);i&&(o=!0),t[n]=s}i(1)}else if(s==="down"){i(1);for(let n=0;n<e;n++){const{arr:s,changed:i}=l(t[n]);i&&(o=!0),t[n]=s}i(3)}o&&(m(n),f(),setTimeout(()=>{h(),m(n),f(),O()||setTimeout(()=>alert("æ¸¸æˆç»“æŸ"),80),!d&&x()&&(d=!0,setTimeout(()=>alert("æ­å–œï¼ä½ è·å¾—äº†2048ï¼ğŸ‰"),80))},250))}window.addEventListener("keydown",e=>{switch(e.key){case"ArrowLeft":e.preventDefault(),o("left");break;case"ArrowRight":e.preventDefault(),o("right");break;case"ArrowUp":e.preventDefault(),o("up");break;case"ArrowDown":e.preventDefault(),o("down");break}}),function(){let t=0,n=0,e=!1;c.addEventListener("touchstart",s=>{s.touches.length===1&&(e=!0,t=s.touches[0].clientX,n=s.touches[0].clientY)}),c.addEventListener("touchmove",t=>{e&&t.preventDefault()},{passive:!1}),c.addEventListener("touchend",s=>{if(!e)return;e=!1;const i=s.changedTouches[0].clientX-t,a=s.changedTouches[0].clientY-n;if(Math.abs(i)<18&&Math.abs(a)<18)return;Math.abs(i)>Math.abs(a)?o(i>0?"right":"left"):o(a>0?"down":"up")})}(),C.addEventListener("click",()=>{v()});function v(){j(),n=0,m(0),b(),_(),d=!1,h(),h(),f()}b(),v()})()</script></body></html>