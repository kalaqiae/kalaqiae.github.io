<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover"><title>2048</title><style>:root{--bg:#faf8ef;--card:#faf8ef;--tile-size:84px;--gap:14px;--radius:6px}*{box-sizing:border-box}body{margin:0;font-family:segoe ui,sf pro display,-apple-system,BlinkMacSystemFont,Roboto,Helvetica,Arial,sans-serif;background:linear-gradient(135deg,#faf8ef 0%,#e9e6df 100%);display:flex;align-items:center;justify-content:center;height:100vh;color:#776e65;user-select:none;-webkit-user-select:none;overflow:hidden}.card{padding:20px;background:var(--card);border-radius:6px;display:flex;flex-direction:column;align-items:center;max-width:500px;width:100%}.header{display:flex;justify-content:space-between;align-items:center;width:100%;margin-bottom:20px}.title{font-size:60px;font-weight:900;color:#776e65;margin:0}.controls{display:flex;gap:10px;align-items:center}.score-box{background:#bbada0;padding:8px 16px;border-radius:6px;text-align:center;color:#fff;min-width:70px}.score-label{font-size:13px;font-weight:700;text-transform:uppercase}.score-value{font-size:20px;font-weight:700}button{border:none;background:#8f7a66;color:#f9f6f2;padding:10px 16px;border-radius:6px;cursor:pointer;font-weight:600;font-size:16px;transition:background .2s;white-space:nowrap}button:hover{background:#7c6b5a}.board-wrap{padding:var(--gap);background:#bbada0;border-radius:6px;box-shadow:0 4px 10px rgba(0,0,0,.1);touch-action:none}.board{position:relative;width:calc(var(--tile-size)*4 + var(--gap)*5);height:calc(var(--tile-size)*4 + var(--gap)*5);border-radius:6px}.cell{position:absolute;width:var(--tile-size);height:var(--tile-size);background:rgba(238,228,218,.35);border-radius:6px}.tiles{position:absolute;inset:0;pointer-events:none}.tile{position:absolute;width:var(--tile-size);height:var(--tile-size);display:flex;align-items:center;justify-content:center;border-radius:6px;font-weight:900;transition:transform 150ms ease-in-out,left 150ms ease-in-out,top 150ms ease-in-out;box-shadow:0 3px 6px rgba(0,0,0,.1);z-index:10}.tile.new{animation:pop 300ms cubic-bezier(.2,.9,.3,1)}.tile.merge{animation:merge 320ms cubic-bezier(.2,.9,.3,1);z-index:20}@keyframes pop{0%{transform:scale(.2);opacity:0}60%{transform:scale(1.05);opacity:1}100%{transform:scale(1)}}@keyframes merge{0%{transform:scale(1)}50%{transform:scale(1.15)}100%{transform:scale(1)}}.tile-2{background:#eee4da;color:#776e65;font-size:48px}.tile-4{background:#ede0c8;color:#776e65;font-size:48px}.tile-8{background:#f2b179;color:#f9f6f2;font-size:48px}.tile-16{background:#f59563;color:#f9f6f2;font-size:42px}.tile-32{background:#f67c5f;color:#f9f6f2;font-size:42px}.tile-64{background:#f65e3b;color:#f9f6f2;font-size:42px}.tile-128{background:#edcf72;color:#f9f6f2;font-size:36px;box-shadow:0 0 15px rgba(243,215,116,.4)}.tile-256{background:#edcc61;color:#f9f6f2;font-size:36px;box-shadow:0 0 15px rgba(243,215,116,.5)}.tile-512{background:#edc850;color:#f9f6f2;font-size:36px;box-shadow:0 0 15px rgba(243,215,116,.6)}.tile-1024{background:#edc53f;color:#f9f6f2;font-size:30px;box-shadow:0 0 15px rgba(243,215,116,.7)}.tile-2048{background:#edc22e;color:#f9f6f2;font-size:30px;box-shadow:0 0 15px rgba(243,215,116,.8)}.game-explanation{margin-top:30px;line-height:1.5;color:#776e65;text-align:center;max-width:500px;font-size:14px}@media(max-width:520px){:root{--tile-size:70px;--gap:10px}.card{padding:10px;height:100%;justify-content:center}.header{flex-direction:row;gap:10px;margin-bottom:15px}.title{font-size:40px}.score-box{min-width:60px;padding:5px 10px}.score-value{font-size:16px}.game-explanation{display:none}.tile-2,.tile-4,.tile-8{font-size:36px}.tile-16,.tile-32,.tile-64{font-size:32px}.tile-128,.tile-256,.tile-512{font-size:28px}.tile-1024,.tile-2048{font-size:24px}}@media(max-width:350px){:root{--tile-size:60px;--gap:8px}.title{font-size:32px}.tile{font-size:28px!important}}</style></head><body><div class=card><div class=header><h1 class=title>2048</h1><div class=controls><div class=score-box><div class=score-label>åˆ†æ•°</div><div class=score-value id=score>0</div></div><div class=score-box><div class=score-label>æœ€é«˜</div><div class=score-value id=best>0</div></div><button id=newBtn>æ–°æ¸¸æˆ</button></div></div><div class=board-wrap><div class=board id=board><div class=tiles id=tiles></div></div></div><div class=game-explanation><p><strong>æ¸¸æˆè§„åˆ™ï¼š</strong>ä½¿ç”¨æ–¹å‘é”®æˆ–æ»‘åŠ¨å±å¹•ç§»åŠ¨æ–¹å—ã€‚å½“ä¸¤ä¸ªç›¸åŒæ•°å­—çš„æ–¹å—ç¢°æ’æ—¶ï¼Œå®ƒä»¬ä¼šåˆå¹¶æˆä¸€ä¸ªæ•°å­—ç¿»å€çš„æ–¹å—ã€‚</p></div></div><script>(function(){const e=4,r=document.getElementById("board"),u=document.getElementById("tiles"),w=document.getElementById("score"),p=document.getElementById("best"),A=document.getElementById("newBtn");let t=[],o=0,c=parseInt(localStorage.getItem("2048-best")||"0",10),f=!1;p.textContent=c;let n,i;function v(){const e=getComputedStyle(document.documentElement);i=parseInt(e.getPropertyValue("--tile-size")),n=parseInt(e.getPropertyValue("--gap"))}function k(){t=Array.from({length:e},()=>Array(e).fill(0))}function E(){const n=[];for(let s=0;s<e;s++)for(let o=0;o<e;o++)t[s][o]===0&&n.push([s,o]);return n.length?n[Math.floor(Math.random()*n.length)]:null}function h(){const e=E();if(!e)return!1;const[n,s]=e;return t[n][s]=Math.random()<.9?2:4,y(n,s,!0),!0}function m(e){o=e,w.textContent=o,o>c&&(c=o,p.textContent=c,localStorage.setItem("2048-best",c))}function j(){const t=r.querySelectorAll(".cell");t.forEach(e=>e.remove());for(let t=0;t<e;t++)for(let o=0;o<e;o++){const s=document.createElement("div");s.className="cell",s.style.left=n+o*(i+n)+"px",s.style.top=n+t*(i+n)+"px",r.appendChild(s)}}function _(){u.innerHTML=""}function O(e,t,s,o={isNew:!1}){const a=document.createElement("div");return a.className="tile tile-"+e+(o.isNew?" new":""),a.textContent=e,a.style.width=i+"px",a.style.height=i+"px",a.style.left=n+s*(i+n)+"px",a.style.top=n+t*(i+n)+"px",a}function y(e,n,s){const o=O(t[e][n],e,n,{isNew:s});u.appendChild(o)}function l(){u.innerHTML="";for(let n=0;n<e;n++)for(let s=0;s<e;s++)t[n][s]&&y(n,s,!1)}function a(n){for(let s=0;s<n;s++){const o=Array.from({length:e},()=>Array(e).fill(0));for(let n=0;n<e;n++)for(let s=0;s<e;s++)o[s][e-1-n]=t[n][s];t=o}}function d(t){const a=t.slice();let n=t.filter(e=>e!==0);const s=new Array(n.length).fill(!1);for(let e=0;e<n.length-1;e++)n[e]===n[e+1]&&!s[e]&&!s[e+1]&&(n[e]*=2,o+=n[e],s[e]=!0,n.splice(e+1,1));for(;n.length<e;)n.push(0);let i=!1;for(let t=0;t<e;t++)if(n[t]!==a[t]){i=!0;break}return{arr:n,changed:i}}function x(){for(let n=0;n<e;n++)for(let s=0;s<e;s++)if(t[n][s]===0)return!0;for(let n=0;n<e;n++)for(let s=0;s<e-1;s++)if(t[n][s]===t[n][s+1])return!0;for(let n=0;n<e;n++)for(let s=0;s<e-1;s++)if(t[s][n]===t[s+1][n])return!0;return!1}function C(){for(let n=0;n<e;n++)for(let s=0;s<e;s++)if(t[n][s]===2048)return!0;return!1}function s(n){let s=!1;if(n==="left")for(let n=0;n<e;n++){const{arr:o,changed:i}=d(t[n]);i&&(s=!0),t[n]=o}else if(n==="right"){a(2);for(let n=0;n<e;n++){const{arr:o,changed:i}=d(t[n]);i&&(s=!0),t[n]=o}a(2)}else if(n==="up"){a(3);for(let n=0;n<e;n++){const{arr:o,changed:i}=d(t[n]);i&&(s=!0),t[n]=o}a(1)}else if(n==="down"){a(1);for(let n=0;n<e;n++){const{arr:o,changed:i}=d(t[n]);i&&(s=!0),t[n]=o}a(3)}s&&(m(o),l(),setTimeout(()=>{h(),m(o),l(),x()||setTimeout(()=>alert("æ¸¸æˆç»“æŸ"),80),!f&&C()&&(f=!0,setTimeout(()=>alert("æ­å–œï¼ä½ è·å¾—äº†2048ï¼ğŸ‰"),80))},250))}window.addEventListener("keydown",e=>{switch(e.key){case"ArrowLeft":e.preventDefault(),s("left");break;case"ArrowRight":e.preventDefault(),s("right");break;case"ArrowUp":e.preventDefault(),s("up");break;case"ArrowDown":e.preventDefault(),s("down");break}}),function(){let t=0,n=0,e=!1;r.addEventListener("touchstart",s=>{s.touches.length===1&&(e=!0,t=s.touches[0].clientX,n=s.touches[0].clientY)},{passive:!1}),r.addEventListener("touchmove",t=>{e&&t.preventDefault()},{passive:!1}),r.addEventListener("touchend",o=>{if(!e)return;e=!1;const i=o.changedTouches[0].clientX-t,a=o.changedTouches[0].clientY-n;if(Math.abs(i)<30&&Math.abs(a)<30)return;Math.abs(i)>Math.abs(a)?s(i>0?"right":"left"):s(a>0?"down":"up")})}(),A.addEventListener("click",()=>{g()});let b;window.addEventListener("resize",()=>{clearTimeout(b),b=setTimeout(()=>{v(),j(),l()},100)});function g(){v(),k(),o=0,m(0),j(),_(),f=!1,h(),h(),l()}g()})()</script></body></html>