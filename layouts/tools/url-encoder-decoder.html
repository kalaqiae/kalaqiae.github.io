{{ define "title" }}URL ç¼–ç ä¸è§£ç å·¥å…· - {{ .Site.Title }}{{ end }}

{{ define "main" }}
<div class="tool-container">
    <div class="card-content">
        <h1 class="text-3xl font-bold mb-6 text-gray-800 flex items-center">
            <svg class="w-6 h-6 mr-3 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.879a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1">
                </path>
            </svg>
            URL ç¼–ç ä¸è§£ç å·¥å…·
        </h1>

        <!-- é”™è¯¯å’Œæ¶ˆæ¯æç¤ºåŒº -->
        <div id="messageBox" class="message-box"></div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- å·¦ä¾§ï¼šè¾“å…¥åŒº -->
            <div>
                <label for="inputArea" class="block text-lg font-semibold mb-2 text-gray-700">è¾“å…¥ URL æˆ–æŸ¥è¯¢å­—ç¬¦ä¸²:</label>
                <textarea id="inputArea" placeholder="ä¾‹å¦‚: https://example.com/search?q=ä¸­æ–‡æœç´¢"></textarea>
            </div>

            <!-- å³ä¾§ï¼šè¾“å‡ºåŒº -->
            <div>
                <label for="outputArea" class="block text-lg font-semibold mb-2 text-gray-700">è¾“å‡ºç»“æœ:</label>
                <textarea id="outputArea" placeholder="å¤„ç†ç»“æœå°†æ˜¾ç¤ºåœ¨æ­¤..."></textarea>
            </div>
        </div>

        <!-- æ“ä½œæŒ‰é’® -->
        <div class="flex flex-wrap justify-center md:justify-start space-x-4 mt-6">
            <button onclick="handleUrl(true)" class="tool-button bg-blue-600 text-white hover:bg-blue-700">
                ğŸš€ ç¼–ç  (Encode)
            </button>
            <button onclick="handleUrl(false)" class="tool-button bg-gray-500 text-white hover:bg-gray-600">
                ğŸ” è§£ç  (Decode)
            </button>
            <button onclick="clearAll()" class="tool-button bg-gray-200 text-gray-800 hover:bg-gray-300">
                ğŸ§¹ æ¸…ç©º
            </button>
            <button onclick="copyOutput()" class="tool-button bg-gray-200 text-gray-800 hover:bg-gray-300">
                ğŸ“‹ å¤åˆ¶ç»“æœ
            </button>
        </div>

        <div class="mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg text-sm text-yellow-800">
            <p class="font-bold mb-1">ğŸ’¡ æ³¨æ„äº‹é¡¹:</p>
            <ul class="list-disc list-inside">
                <li>æœ¬å·¥å…·ä½¿ç”¨ `encodeURIComponent` å’Œ `decodeURIComponent` å¤„ç† URL ä¸­**éç»“æ„éƒ¨åˆ†**ï¼ˆå¦‚æŸ¥è¯¢å‚æ•°å€¼ã€è·¯å¾„æ®µï¼‰ã€‚</li>
                <li>å®ƒä¸ä¼šç¼–ç  `/`ã€`?`ã€`=` ç­‰ URL ç»“æ„ç¬¦å·ã€‚</li>
            </ul>
        </div>
    </div>
</div>

<style>
    .tool-container {
        max-width: 1000px;
        margin: 40px auto;
        padding: 20px;
    }

    textarea {
        width: 100%;
        height: 200px;
        padding: 1rem;
        border: 2px solid #E0E0E0;
        border-radius: var(--border-radius);
        font-family: monospace;
        font-size: 0.95rem;
        resize: none;
        outline: none;
        transition: border-color 0.2s;
        background-color: #F8F9FA;
    }

    textarea:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(30, 136, 229, 0.2);
    }

    .card-content {
        background-color: var(--card-background-base);
        padding: 1.5rem;
        border-radius: var(--border-radius);
        box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        backdrop-filter: blur(5px);
        border: 1px solid #E0E0E0;
    }

    .tool-button {
        padding: 0.75rem 1.5rem;
        border-radius: 0.5rem;
        font-weight: 600;
        transition: all 0.2s;
        border: none;
        cursor: pointer;
    }

    .tool-button:hover {
        box-shadow: 0 4px 8px rgba(30, 136, 229, 0.4);
        transform: translateY(-1px);
    }

    /* æ¶ˆæ¯æç¤ºæ¡† */
    .message-box {
        padding: 1rem;
        border-radius: var(--border-radius);
        margin-bottom: 1rem;
        font-weight: 500;
        display: none;
    }

    .message-box.error {
        background-color: #FEE2E2;
        color: #EF4444;
        border: 1px solid #FCA5A5;
    }

    .message-box.info {
        background-color: #E3F2FD;
        color: #1E88E5;
        border: 1px solid #90CAF9;
    }
</style>

<script>
    const inputArea = document.getElementById('inputArea');
    const outputArea = document.getElementById('outputArea');
    const messageBox = document.getElementById('messageBox');

    /**
     * æ˜¾ç¤ºæ¶ˆæ¯æç¤º
     */
    function showMessage(message, type = 'info') {
        messageBox.textContent = message;
        messageBox.className = 'message-box'; // é‡ç½®ç±»
        messageBox.classList.add(type);
        messageBox.style.display = 'block';

        setTimeout(() => {
            messageBox.style.display = 'none';
        }, 5000);
    }

    /**
     * å¤„ç† URL ç¼–ç æˆ–è§£ç 
     * @param {boolean} isEncode - true è¡¨ç¤ºç¼–ç ï¼Œfalse è¡¨ç¤ºè§£ç 
     */
    function handleUrl(isEncode) {
        messageBox.style.display = 'none';
        const input = inputArea.value.trim();

        if (!input) {
            showMessage("è¾“å…¥å†…å®¹ä¸èƒ½ä¸ºç©ºï¼", 'error');
            return;
        }

        try {
            let result;
            if (isEncode) {
                // ä½¿ç”¨ encodeURIComponent å¤„ç†æŸ¥è¯¢å‚æ•°æˆ–è·¯å¾„æ®µ
                result = encodeURIComponent(input);
                showMessage("URL ç¼–ç æˆåŠŸï¼", 'info');
            } else {
                // ä½¿ç”¨ decodeURIComponent è§£ç 
                result = decodeURIComponent(input);
                showMessage("URL è§£ç æˆåŠŸï¼", 'info');
            }
            outputArea.value = result;

        } catch (e) {
            // æ•è·æ— æ•ˆ URL ç¼–ç å­—ç¬¦æˆ– URI å¼‚å¸¸
            showMessage("æ“ä½œå¤±è´¥ï¼šè¾“å…¥çš„å­—ç¬¦ä¸²æ ¼å¼æ— æ•ˆæˆ–åŒ…å«æ— æ³•è§£ç çš„å­—ç¬¦ã€‚", 'error');
            console.error("URL Encoding/Decoding Error:", e);
            outputArea.value = "";
        }
    }

    /**
     * æ¸…ç©ºæ‰€æœ‰è¾“å…¥å’Œè¾“å‡º
     */
    function clearAll() {
        inputArea.value = "";
        outputArea.value = "";
        messageBox.style.display = 'none';
        showMessage("å·²æ¸…ç©ºæ‰€æœ‰åŒºåŸŸã€‚", 'info');
    }

    /**
     * å¤åˆ¶è¾“å‡ºç»“æœåˆ°å‰ªè´´æ¿
     */
    function copyOutput() {
        const output = outputArea.value;
        if (!output) {
            showMessage("è¾“å‡ºç»“æœä¸ºç©ºï¼Œæ— æ³•å¤åˆ¶ã€‚", 'error');
            return;
        }

        // å¤åˆ¶åˆ°å‰ªè´´æ¿
        outputArea.select();
        document.execCommand('copy');
        outputArea.setSelectionRange(0, 0); // å–æ¶ˆé€‰ä¸­

        showMessage("ç»“æœå·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼", 'info');
    }
</script>
{{ end }}