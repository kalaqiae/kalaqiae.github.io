{{ define "title" }}æ–‡æœ¬æ ¼å¼è½¬æ¢å·¥å…· - {{ .Site.Title }}{{ end }}

{{ define "main" }}
<div class="tool-container">
    <div class="card-content">
        <h1 class="text-3xl font-bold mb-6 text-gray-800 flex items-center">
            <svg class="w-6 h-6 mr-3 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129">
                </path>
            </svg>
            æ–‡æœ¬æ ¼å¼è½¬æ¢å·¥å…·
        </h1>

        <div id="messageBox" class="message-box"></div>

        <div class="grid grid-cols-1 gap-6">
            <!-- è¾“å…¥åŒºåŸŸ -->
            <div>
                <label for="inputText" class="block text-lg font-semibold mb-2 text-gray-700">è¾“å…¥æ–‡æœ¬:</label>
                <textarea id="inputText" class="input-area" placeholder="åœ¨æ­¤è¾“å…¥éœ€è¦è½¬æ¢çš„æ–‡æœ¬ï¼Œä¾‹å¦‚: hello world"
                    oninput="updateStats()"></textarea>
                <div class="flex justify-between mt-2 text-sm text-gray-500">
                    <span>ç»Ÿè®¡: <span id="charCount" class="font-mono">0</span> å­—ç¬¦ | <span id="wordCount"
                            class="font-mono">0</span> å•è¯ | <span id="lineCount" class="font-mono">0</span> è¡Œ</span>
                    <button onclick="clearText()"
                        class="text-red-500 hover:text-red-700 hover:underline transition-colors">æ¸…ç©º</button>
                </div>
            </div>

            <!-- æ“ä½œæŒ‰é’®ç»„ -->
            <div class="bg-gray-50 p-5 rounded-lg border border-gray-200">
                <h3 class="text-sm font-bold text-gray-500 mb-3 uppercase tracking-wider">å¸¸ç”¨æ ¼å¼</h3>
                <div class="flex flex-wrap gap-3 mb-5">
                    <button onclick="convert('uppercase')"
                        class="tool-button bg-blue-600 text-white hover:bg-blue-700">å…¨å¤§å†™ (UPPER)</button>
                    <button onclick="convert('lowercase')"
                        class="tool-button bg-blue-600 text-white hover:bg-blue-700">å…¨å°å†™ (lower)</button>
                    <button onclick="convert('capitalize')"
                        class="tool-button bg-blue-600 text-white hover:bg-blue-700">å•è¯é¦–å¤§å†™ (Title Case)</button>
                    <button onclick="convert('sentenceCase')"
                        class="tool-button bg-blue-600 text-white hover:bg-blue-700">å¥é¦–å¤§å†™ (Sentence)</button>
                </div>

                <h3 class="text-sm font-bold text-gray-500 mb-3 uppercase tracking-wider">ç¼–ç¨‹å‘½å & å…¶ä»–</h3>
                <div class="flex flex-wrap gap-3">
                    <button onclick="convert('camelCase')"
                        class="tool-button bg-indigo-600 text-white hover:bg-indigo-700">é©¼å³° (camelCase)</button>
                    <button onclick="convert('pascalCase')"
                        class="tool-button bg-indigo-600 text-white hover:bg-indigo-700">å¤§é©¼å³° (PascalCase)</button>
                    <button onclick="convert('snakeCase')"
                        class="tool-button bg-indigo-600 text-white hover:bg-indigo-700">ä¸‹åˆ’çº¿ (snake_case)</button>
                    <button onclick="convert('kebabCase')"
                        class="tool-button bg-indigo-600 text-white hover:bg-indigo-700">çŸ­æ¨ªçº¿ (kebab-case)</button>
                    <button onclick="convert('alternatingCase')"
                        class="tool-button bg-gray-600 text-white hover:bg-gray-700">ä¹±åº (aLtErNaTiNg)</button>
                </div>
            </div>

            <!-- è¾“å‡ºåŒºåŸŸ -->
            <div>
                <label for="outputText" class="block text-lg font-semibold mb-2 text-gray-700">è½¬æ¢ç»“æœ:</label>
                <textarea id="outputText" class="input-area bg-gray-50" readonly
                    placeholder="è½¬æ¢åçš„ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ..."></textarea>
            </div>

            <div class="flex justify-end">
                <button onclick="copyResult()"
                    class="tool-button bg-green-600 text-white hover:bg-green-700 py-2 px-6 text-lg shadow-md">
                    ğŸ“‹ å¤åˆ¶ç»“æœ
                </button>
            </div>
        </div>
    </div>
</div>

<style>
    .tool-container {
        max-width: 1000px;
        margin: 40px auto;
        padding: 20px;
    }

    .card-content {
        background-color: var(--card-background-base);
        padding: 1.5rem;
        border-radius: var(--border-radius);
        box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        border: 1px solid #E0E0E0;
    }

    .input-area {
        width: 100%;
        height: 150px;
        padding: 1rem;
        border: 2px solid #E0E0E0;
        border-radius: 0.5rem;
        font-family: 'Consolas', 'Monaco', monospace;
        font-size: 1rem;
        resize: vertical;
        outline: none;
        transition: border-color 0.2s;
        background-color: #FFFFFF;
    }

    .input-area:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(30, 136, 229, 0.2);
    }

    .tool-button {
        padding: 0.5rem 1rem;
        border-radius: 0.375rem;
        font-weight: 600;
        transition: all 0.2s;
        border: none;
        cursor: pointer;
        font-size: 0.9rem;
    }

    .tool-button:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .message-box {
        padding: 1rem;
        border-radius: var(--border-radius);
        margin-bottom: 1rem;
        font-weight: 500;
        display: none;
    }

    .message-box.info {
        background-color: #E3F2FD;
        color: #1E88E5;
        border: 1px solid #90CAF9;
    }

    .message-box.error {
        background-color: #FEE2E2;
        color: #EF4444;
        border: 1px solid #FCA5A5;
    }
</style>

<script>
    const inputText = document.getElementById('inputText');
    const outputText = document.getElementById('outputText');
    const messageBox = document.getElementById('messageBox');

    function showMessage(message, type = 'info') {
        messageBox.textContent = message;
        messageBox.className = 'message-box ' + type;
        messageBox.style.display = 'block';
        setTimeout(() => messageBox.style.display = 'none', 3000);
    }

    function updateStats() {
        const text = inputText.value;
        document.getElementById('charCount').innerText = text.length;
        // ç®€å•çš„å•è¯è®¡æ•°ï¼šæŒ‰ç©ºç™½å­—ç¬¦åˆ†å‰²å¹¶è¿‡æ»¤ç©ºä¸²
        document.getElementById('wordCount').innerText = text.trim() === '' ? 0 : text.trim().split(/\s+/).length;
        document.getElementById('lineCount').innerText = text.trim() === '' ? 0 : text.split(/\n/).length;
    }

    function clearText() {
        inputText.value = '';
        outputText.value = '';
        updateStats();
    }

    function copyResult() {
        if (!outputText.value) {
            showMessage('æ²¡æœ‰å¯å¤åˆ¶çš„å†…å®¹', 'error');
            return;
        }
        outputText.select();
        document.execCommand('copy');
        showMessage('ç»“æœå·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'info');
    }

    // --- è½¬æ¢é€»è¾‘æ ¸å¿ƒ ---

    // å°†æ–‡æœ¬åˆ†å‰²ä¸ºå•è¯æ•°ç»„ï¼Œå¤„ç†é©¼å³°ã€ä¸‹åˆ’çº¿ã€è¿å­—ç¬¦ç­‰
    function toWords(str) {
        if (!str) return [];
        return str
            // åœ¨å¤§å†™å­—æ¯å‰æ·»åŠ ç©ºæ ¼ (å¤„ç† camelCase)
            .replace(/([a-z])([A-Z])/g, '$1 $2')
            // å°†éå­—æ¯æ•°å­—æ›¿æ¢ä¸ºç©ºæ ¼
            .replace(/[^a-zA-Z0-9\u4e00-\u9fa5]+/g, ' ')
            .trim()
            .split(/\s+/);
    }

    function convert(mode) {
        const text = inputText.value;
        if (!text) {
            showMessage('è¯·è¾“å…¥æ–‡æœ¬', 'error');
            return;
        }

        let result = '';

        switch (mode) {
            case 'uppercase':
                result = text.toUpperCase();
                break;
            case 'lowercase':
                result = text.toLowerCase();
                break;
            case 'capitalize':
                // æ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ (Title Case)
                result = text.toLowerCase().replace(/(?:^|\s)\S/g, function (a) { return a.toUpperCase(); });
                break;
            case 'sentenceCase':
                // å¥é¦–å­—æ¯å¤§å†™ (ç®€å•å¤„ç† . ! ? åçš„å­—ç¬¦)
                result = text.toLowerCase().replace(/(^\s*\w|[\.\!\?]\s*\w)/g, c => c.toUpperCase());
                break;
            case 'camelCase':
                const wordsCamel = toWords(text);
                result = wordsCamel.map((word, index) => {
                    if (index === 0) return word.toLowerCase();
                    return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();
                }).join('');
                break;
            case 'pascalCase':
                const wordsPascal = toWords(text);
                result = wordsPascal.map((word) => {
                    return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();
                }).join('');
                break;
            case 'snakeCase':
                result = toWords(text).map(x => x.toLowerCase()).join('_');
                break;
            case 'kebabCase':
                result = toWords(text).map(x => x.toLowerCase()).join('-');
                break;
            case 'alternatingCase':
                // aLtErNaTiNg cAsE
                result = text.split('').map((c, i) => i % 2 === 0 ? c.toLowerCase() : c.toUpperCase()).join('');
                break;
        }

        outputText.value = result;
        showMessage('è½¬æ¢æˆåŠŸï¼', 'info');
    }
</script>
{{ end }}